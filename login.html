<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veritas Finance - Secure Access</title>
    <link rel="stylesheet" href="auth-style.css"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body class="light-mode">

    <header class="navbar">
        <a href="index.html" class="logo">Veritas Finance</a>
        <div class="nav-actions">
            <label class="toggle-switch">
                <input type="checkbox" id="darkModeToggle">
                <span class="slider round"></span>
                <i class="fas fa-sun light-icon"></i>
                <i class="fas fa-moon dark-icon"></i>
            </label>
        </div>
    </header>

    <main class="auth-container">
        <div class="auth-box animate-scale">
            <div class="toggle-header">
                <button id="show-register" class="toggle-btn active">Register</button>
                <button id="show-login" class="toggle-btn">Login</button>
            </div>
            
            <form id="register-form" class="auth-form active-form animate-slide" >
                <h2>Open Your Account</h2>
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" name="name" placeholder="Full Name" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" name="email" placeholder="Email Address" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" name="password" placeholder="Create Password" required minlength="8">
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" name="confirm-password" placeholder="Confirm Password" required>
                </div>
                <input type="hidden" name="_next" value="dashboard.html">
                <a href="dashboard.html">
                <button type="button" class="cta-button primary">Register Now</button>
                </a>
                <p class="form-footer">By registering, you agree to our <a href="#">Terms and Conditions</a>.</p>
            </form>

            <form id="login-form" class="auth-form animate-slide">
                <h2>Welcome Back</h2>
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" name="username" placeholder="Email or Username" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" name="password" placeholder="Password" required>
                </div>
                <p class="forgot-password"><a href="#">Forgot Password?</a></p>
                <a href="dashboard.html">
                <button type="submit" class="cta-button primary">Log In</button>
                </a>
            </form>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
    // --- 1. Dark Mode Toggle Logic (Reused from Landing Page) ---
    const toggleSwitch = document.getElementById('darkModeToggle');
    const body = document.body;

    const currentTheme = localStorage.getItem('theme');
        
    if (currentTheme) {
        body.classList.add(currentTheme);
        if (currentTheme === 'dark-mode') {
            toggleSwitch.checked = true;
        }
    } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        body.classList.add('dark-mode');
        toggleSwitch.checked = true;
    } else {
        body.classList.add('light-mode');
    }

    toggleSwitch.addEventListener('change', function() {
        if (this.checked) {
            body.classList.remove('light-mode');
            body.classList.add('dark-mode');
            localStorage.setItem('theme', 'dark-mode');
        } else {
            body.classList.remove('dark-mode');
            body.classList.add('light-mode');
            localStorage.setItem('theme', 'light-mode');
        }
    });


    // --- 2. Form Toggle Logic with Slide Animation ---
    const showRegisterBtn = document.getElementById('show-register');
    const showLoginBtn = document.getElementById('show-login');
    const registerForm = document.getElementById('register-form');
    const loginForm = document.getElementById('login-form');

    let currentForm = 'register';

    const switchForm = (target) => {
        if (target === currentForm) return;

        const outgoingForm = (currentForm === 'register') ? registerForm : loginForm;
        const incomingForm = (target === 'register') ? registerForm : loginForm;
        
        // Determine animation direction
        let outgoingAnim, incomingAnim;
        if (target === 'register') {
            // Switching from Login (right) to Register (left)
            outgoingAnim = 'slideOutRight'; 
            incomingAnim = 'slideInLeft';
        } else {
            // Switching from Register (left) to Login (right)
            outgoingAnim = 'slideOutLeft';
            incomingAnim = 'slideInRight';
        }

        // 1. Start outgoing form animation
        outgoingForm.style.animation = `${outgoingAnim} 0.4s forwards`;
        
        // 2. Update button state
        if (target === 'register') {
            showLoginBtn.classList.remove('active');
            showRegisterBtn.classList.add('active');
        } else {
            showRegisterBtn.classList.remove('active');
            showLoginBtn.classList.add('active');
        }

        // 3. Wait for animation to finish, then swap and animate incoming form
        setTimeout(() => {
            outgoingForm.classList.remove('active-form');
            outgoingForm.style.animation = ''; // Reset animation style
            
            incomingForm.classList.add('active-form');
            incomingForm.style.animation = `${incomingAnim} 0.4s forwards`;
            
            currentForm = target;
        }, 400); // Must match CSS animation duration
    };

    showRegisterBtn.addEventListener('click', () => switchForm('register'));
    showLoginBtn.addEventListener('click', () => switchForm('login'));
        });

        const redirectToDash = (event) => {
            event.preventDefault();
            window.location.href = 'dashboard.html';
        };

        if (registerForm) {
            registerForm.addEventListener('submit', redirectToDash);
        }

        
        if (loginForm) {
            loginForm.addEventListener('submit', redirectToDash);
        }

        
        
    //  const formspreeEndpoint = 'https://formspree.io/f/xgvnbwzp'; // Your Formspree ID
    // const redirectURL = 'dashboard.html'; // Changed to a generic confirmation page

    // form.addEventListener('submit', async function(event) {
    //     event.preventDefault(); // Stop the default form submission (browser redirect)

       
    //     // 2. Prepare the form data for Formspree
    //     const formData = new FormData(form);
    //     const data = Object.fromEntries(formData.entries());
    // });

    //     try { // 3. Send data to Formspree asynchronously and WAIT for the response
    //         const response = await fetch(formspreeEndpoint, {
    //             method: 'POST',
    //             headers: {
    //                 // CRITICAL: Must use application/json for CORS with fetch
    //                 'Content-Type': 'application/json',
    //                 'Accept': 'application/json'
    //             },
    //             body: JSON.stringify(data)
    //         });
    //          if (response.ok) {
    //             // Wait briefly for user to see success message, then redirect
    //             setTimeout(() => {
    //                 window.location.href = redirectURL; 
    //             }, 1500); 
    //         }else {
    //             const errorsData = await response.json();
    //             console.error('derror', errorsData)
    //                     }
    //     } catch (error){
    //         console.error('deaa')
    //     }
        
           
    
    </script>
</body>
</html>